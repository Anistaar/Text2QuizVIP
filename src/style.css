:root{
  --bg:#0b0f14; --fg:#e8eaed; --muted:#9aa4af; --brd:#22303c;
  --ok-bg:#123d28; --ok-brd:#1f6b45; --ok-fg:#adf0c0;
  --ko-bg:#3a1517; --ko-brd:#5a2225; --ko-fg:#f9b3b6;
  --warn-bg:#2a2417; --warn-brd:#4b4130;
  --primary:#e8eaed;
  --accent:#84cc16;
}

/* Variante claire si besoin */
html[data-theme="light"]{
  --bg:#ffffff; --fg:#111; --muted:#6b7280; --brd:#e5e7eb;
  --ok-bg:#eafaf0; --ok-brd:#b4e4c7; --ok-fg:#14532d;
  --ko-bg:#fef2f2; --ko-brd:#f5c2c7; --ko-fg:#7f1d1d;
  --warn-bg:#fff8f0; --warn-brd:#f3d5b0;
  --primary:#111;
  --accent:#2563eb;
}

/* -------- Layout global compact -------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}
.wrap{max-width:820px;margin:0 auto;padding:0 12px 24px}

/* Topbar collante */
.topbar{
  position:sticky; top:0; z-index:50;
  background:var(--bg); border-bottom:1px solid var(--brd);
  display:flex; gap:12px; align-items:center; justify-content:space-between;
  padding:10px 0;
}
h1{margin:0; font-size:20px}
.subtitle{margin:6px 0 12px;color:var(--muted);font-size:14px}

.theme-toggle{display:flex;align-items:center;gap:8px;font-weight:600}
.theme-toggle input{transform:scale(1.1)}

/* Carte réglages */
.card{
  border:1px solid var(--brd);border-radius:12px;background:transparent;
  padding:12px;margin:10px 0;
}
.row{display:grid;gap:6px;margin-bottom:10px}
label{font-weight:600;font-size:14px}
select,input{
  padding:8px 10px;border-radius:10px;border:1px solid var(--brd);
  background:transparent;color:var(--fg);font-size:14px;
}
select option{background:var(--bg);color:var(--fg)}
.modes{display:flex;gap:14px}

/* Boutons */
.primary,.secondary{
  padding:8px 12px;border-radius:10px;cursor:pointer;font-size:14px
}
.primary{border:1px solid var(--primary);background:transparent;color:var(--primary)}
.primary:hover{background:var(--primary);color:var(--bg)}
.secondary{border:1px solid var(--primary);background:transparent;color:var(--primary)}
.primary:disabled{opacity:.6;cursor:not-allowed}

/* Head + progression */
.head{display:flex;gap:10px;justify-content:space-between;flex-wrap:wrap;margin:8px 0}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--brd);font-size:12px;color:var(--muted)}
.progress{height:8px;background:transparent;border-radius:999px;border:1px solid var(--brd);overflow:hidden}
.progress__bar{height:100%;background:var(--accent);transition:width .2s ease}

/* -------- Carte question compacte -------- */
.card--q{
  position:relative;
  border:1px solid var(--brd);border-radius:12px;background:transparent;
  padding:12px;margin:10px 0;
  max-height:62vh; /* tient sur un écran laptop */
  overflow:auto;   /* si énoncé long, scroll interne */
  scroll-behavior:smooth;
}
.qtitle{font-weight:800;margin:0 0 6px 0}
.block{margin:8px 0}
.hint{margin-top:4px}
small.muted{color:var(--muted)}

/* Options compactes en grille 2 colonnes */
.options{display:grid;gap:8px;margin:10px 0}
@media (min-width:768px){
  .options{grid-template-columns:repeat(2,minmax(0,1fr))}
}
.options--inline{grid-template-columns:none;grid-auto-flow:column;justify-content:start}

.opt{
  display:flex;gap:8px;align-items:center;padding:8px 10px;
  border:1px solid var(--brd);border-radius:10px;transition:.15s;
}
.opt input{transform:scale(1.05);margin-top:1px}
.opt.good{background:var(--ok-bg);border-color:var(--ok-brd)}
.opt.bad{background:var(--ko-bg);border-color:var(--ko-brd)}
.opt .label{flex:1}
.mark{margin-left:auto;font-weight:800}
.mark--good{color:var(--ok-fg)}
.mark--bad{color:var(--ko-fg)}

/* Feedback repliable */
.feedback{margin-top:8px;border-radius:10px;padding:8px}
.feedback.ok{background:var(--ok-bg);border:1px solid var(--ok-brd)}
.feedback.ko{background:var(--ko-bg);border:1px solid var(--ko-brd)}
details.feedback > summary{
  cursor:pointer; list-style:none; font-weight:700;
}
details.feedback > summary::-webkit-details-marker{display:none}

/* Bouton “Suivant” flottant */
.fab-next{
  position:fixed; right:18px; bottom:18px; z-index:60;
  border-radius:999px; padding:10px 14px; font-weight:700;
  border:1px solid var(--primary); background:var(--primary); color:var(--bg);
  box-shadow:0 6px 30px rgba(0,0,0,.25); cursor:pointer;
}
.fab-next:disabled{opacity:.6;cursor:not-allowed}

/* Résultats */
.list{display:grid;gap:8px;padding-left:18px}
.list li{list-style:decimal;border:1px solid var(--brd);border-radius:12px;padding:10px}
.list li.ok{background:var(--ok-bg);border-color:var(--ok-brd)}
.list li.ko{background:var(--warn-bg);border-color:var(--warn-brd)}
